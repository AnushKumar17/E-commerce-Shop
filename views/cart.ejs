<%- include('./partials/header') %>
    <div class="w-full h-screen  items-start px-20 py-5 gap-10">

        <div class="w-full px-3 md:px-6 mb-6">
            <h3 class="text-lg md:text-xl font-semibold">Price Breakdown</h3>
            <div class="mt-3 space-y-2">
                <!-- Total MRP -->
                <div class="flex justify-between items-center mt-1">
                    <h4 class="text-sm md:text-base">Total MRP</h4>
                    <h4 class="text-sm md:text-base">₹ <%= totalPrice %></h4>
                </div>
                
                <!-- Total Discount -->
                <div class="flex justify-between items-center mt-1">
                    <h4 class="text-sm md:text-base">Total Discount</h4>
                    <h4 class="text-sm md:text-base">₹ <%= totalDiscount %></h4>
                </div>
        
                <!-- Platform Fee -->
                <div class="flex justify-between items-center mt-1">
                    <h4 class="text-sm md:text-base">Platform Fee</h4>
                    <h4 class="text-sm md:text-base">₹ 20</h4>
                </div>
        
                <!-- Shipping Fee -->
                <div class="flex justify-between items-center mt-1">
                    <h4 class="text-sm md:text-base">Shipping Fee</h4>
                    <h4 class="text-sm md:text-base">FREE</h4>
                </div>
            </div>
        
            <div class="w-full h-[1px] bg-gray-300 mt-8"></div>
        
            <!-- Total Amount -->
            <div class="flex justify-between items-center mt-3">
                <h3 class="text-lg md:text-xl">Total Amount</h3>
                <h3 class="font-semibold text-lg text-green-600">₹ <%= bill %></h3>
            </div>
        </div>
        
        

        <!-- <% user.cart.forEach(function(item) { %>
            <div class="w-full rounded-md overflow-hidden">
                <div class="w-full flex justify-center items-center h-80 bg-[<%= item.bgcolor %>]">
                    <img src="data:image/jpeg;base64,<%= item.image.toString('base64') %>" alt="Product Image" />
                </div>            
                <div class="w-full flex justify-between px-5 py-4 bg-[<%= item.panelcolor %>]">
                    <h3 class="text-2xl"><%= item.name %></h3>
                </div>
                <div class="flex text-white items-center justify-between px-5 py-3 bg-[<%= item.textcolor %>]">
                    <h4 class="text-lg">Net Total (after discount)</h4>
                    <h2 class="text-lg">₹ <%= item.price - item.discount %></h2>
                </div>
            </div>
        <% }); %> -->
        

        <div class="text-xl font-semibold underline pl-6 mb-4">Items in your cart : </div>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 px-3 md:px-6">
            <% user.cart.forEach(function(item) { %>
                <div class="w-full rounded-md overflow-hidden bg-white shadow-sm">
                    <!-- Product Image -->
                    <div class="w-full flex justify-center items-center h-36 bg-[<%= item.bgcolor %>]">
                        <img src="data:image/jpeg;base64,<%= item.image.toString('base64') %>" alt="Product Image" class="max-h-full object-contain" />
                    </div>            
                    <!-- Product Name -->
                    <div class="w-full flex justify-between items-center px-3 py-2 bg-[<%= item.panelcolor %>]">
                        <h3 class="text-sm font-semibold"><%= item.name %></h3>
                
                        <!-- Remove Button with hover effect -->
                        <form action="/cart/remove/<%= item._id %>" method="">
                            <button type="submit" class="px-3 py-1 text-xs text-white bg-red-500 rounded-md cursor-pointer hover:bg-red-600 transform hover:scale-105 transition-all duration-300" title="Remove Item">
                                Remove
                            </button>
                        </form>
                    </div>
                    <!-- Price and Discount -->
                    <div class="flex text-white items-center justify-between px-3 py-1 bg-[<%= item.textcolor %>]">
                        <h4 class="text-xs">Net Total (after discount)</h4>
                        <h2 class="text-xs">₹ <%= item.price - item.discount %></h2>
                    </div>
                </div>
            <% }); %>
        </div>
    </div>
    <%- include('./partials/footer') %>